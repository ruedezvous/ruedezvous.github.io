/*
 * custom.css
 * 用于 Hexo clean-blog 主题的自定义排版 - 最终修复版 (V5)
 */

/* ====================
 * 1. 全局字体定义 (Font Definitions)
 * ==================== */

/* 字体导入（保持不变）*/
/* 确保字体路径是正确的： */
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 300; 
    font-style: normal;
}
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 400; 
    font-style: normal;
}

/* 定义CSS变量 */
:root {
    --chinese-font: 'Noto Serif SC', serif;
    --english-font: serif; 

    /* 颜色设置 */
    --color-white: #ffffff;
    --color-nav-mobile: #555555; /* **新增：手机导航栏下拉字体颜色** */
    --color-black-gray: #333333; 
    --color-text-normal: #404040; 
    --color-text-strong: #202020; 

    /* 正文排版 */
    --body-font-size: 14.5px; 
    --body-font-weight-normal: 300; 
    --body-line-height: 1.85; 
    --body-paragraph-margin-bottom: 1.4em; 
    --body-text-indent: 2em; 

    /* 手机端字号优化 */
    --mobile-font-size: 14px; /* **新增：手机端字号进一步缩小** */
    --mobile-line-height: 1.6; /* 手机端行间距略减 */
}

/* 应用全局样式 */
body {
    font-family: var(--chinese-font), var(--english-font);
    color: var(--color-text-normal);
    font-weight: var(--body-font-weight-normal);
}

/* 加强目标字体应用 */
p, li, blockquote,
.container-fluid, /* **加强目标字体优先级，应用于更广范围** */
.container.post-container {
    font-family: var(--chinese-font), var(--english-font) !important;
    font-weight: var(--body-font-weight-normal) !important;
    color: var(--color-text-normal) !important;
}

strong, b {
    font-weight: 700; 
    color: var(--color-text-strong); 
}

/* 列表圆点修复（保持不变）*/
ul, ol {
    list-style-type: none; 
}
.post-content ul {
    list-style-type: disc; 
}
.post-content ol {
    list-style-type: decimal;
}


/* ====================
 * 2. 首页 (Index/List Pages) 和导航栏样式
 * ==================== */

/* 标题字体重置（保持不变）*/
.navbar a,
header.masthead h1,
header.masthead .subheading,
.post-preview .post-title,
.post-preview .post-subtitle {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
}

/* 颜色设置（保持不变）*/
.navbar a {
    color: var(--color-white) !important;
}
header.masthead h1,
header.masthead .subheading {
    color: var(--color-white) !important;
}
.post-preview .post-title,
.post-preview .post-subtitle {
    color: var(--color-black-gray) !important;
}

/* 修复：分割线颜色优化（保持不变）*/
hr.small,
hr.post-heading-small,
.post-preview hr {
    border-color: #dddddd; 
}

/* **修复：手机端下拉导航栏字体颜色** */
.navbar-custom .nav li a,
.navbar-default .nav li a {
    color: var(--color-nav-mobile) !important; /* **应用黑灰色，确保在浅色背景下可见** */
}


/* ====================
 * 3. 文章页 (Post Page) 正文排版
 * ==================== */

.container.post-container .post-content,
.container.post-container .post-content p {
    text-align: justify; 
    font-size: var(--body-font-size); 
    line-height: var(--body-line-height); 
    margin-bottom: var(--body-paragraph-margin-bottom); 
}

/* **修复：加强首行缩进优先级（网页端和手机端）** */
.container.post-container .post-content p {
    /* 针对所有文章内容中的段落，使用!important确保首行缩进生效 */
    text-indent: var(--body-text-indent) !important; 
}

/* 确保列表、引用等不缩进的规则仍然存在 */
.container.post-container .post-content ul p,
.container.post-container .post-content ol p,
.container.post-container .post-content blockquote p,
.container.post-container .post-content pre p {
    text-indent: 0 !important; 
}


/* ====================
 * 4. 响应式布局 (Responsive/Mobile Layout)
 * ==================== */

@media (max-width: 768px) {
    /* 修复：强制在移动端使用目标字体和字重 */
    body, p, li, blockquote,
    .container-fluid,
    .container.post-container {
        font-family: var(--chinese-font), var(--english-font) !important; 
        font-weight: var(--body-font-weight-normal) !important;
    }

    /* 增加容器的内边距，防止贴边（保持不变） */
    .container {
        padding-left: 15px;
        padding-right: 15px;
    }

    /* **修复：手机端字号和行间距调整** */
    .container.post-container .post-content,
    .container.post-container .post-content p {
        font-size: var(--mobile-font-size) !important; /* **使用 14px** */
        line-height: var(--mobile-line-height) !important; /* **使用 1.6** */
    }
}
