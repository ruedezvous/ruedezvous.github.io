/*
 * custom.css
 * 用于 Hexo clean-blog 主题的自定义排版 - 终极修复与优化
 */

/* ====================
 * 1. 全局字体定义 (Font Definitions & Colors)
 * ==================== */

/* 字体导入（假设路径正确）*/
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 300; 
    font-style: normal;
}
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 400; 
    font-style: normal;
}

/* 定义CSS变量 */
:root {
    --chinese-font: 'Noto Serif SC', serif;
    --english-font: serif; 

    /* 颜色设置 */
    --color-white: #ffffff;
    --color-nav-mobile: #555555; /* 手机导航栏下拉字体颜色 */
    --color-black-gray: #333333; 
    --color-text-normal: #404040; 
    --color-text-strong: #202020; 

    /* 正文排版优化：行间距与段间距 */
    --body-font-size: 14.5px; 
    --body-font-weight-normal: 300; 
    --body-line-height: 1.8; /* **优化：行间距略减，更美观** */
    --body-paragraph-margin-bottom: 1.2em; /* **优化：段间距略减，更紧凑** */
    --body-text-indent: 2ch; /* 首行缩进 */

    /* 手机端优化 */
    --mobile-font-size: 14px; 
    --mobile-line-height: 1.7; 
    --mobile-padding: 20px; /* **优化：手机端两侧的间距** */
}

/* 应用全局样式和字重 */
body {
    font-family: var(--chinese-font), var(--english-font);
    color: var(--color-text-normal);
    font-weight: var(--body-font-weight-normal);
}

/* 加强目标字体应用 */
p, li, blockquote,
.container-fluid,
.container.post-container {
    font-family: var(--chinese-font), var(--english-font) !important;
    font-weight: var(--body-font-weight-normal) !important;
    color: var(--color-text-normal) !important;
}

strong, b {
    font-weight: 700; 
    color: var(--color-text-strong); 
}

/* 列表圆点修复（保持不变）*/
ul, ol {
    list-style-type: none; 
}
.post-content ul {
    list-style-type: disc; 
}
.post-content ol {
    list-style-type: decimal;
}


/* ====================
 * 2. 导航栏和标题样式
 * ==================== */

/* 标题字体重置（保持不变）*/
.navbar a,
header.masthead h1,
header.masthead .subheading,
.post-preview .post-title,
.post-preview .post-subtitle {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
}

/* 颜色设置（保持不变）*/
header.masthead h1,
header.masthead .subheading {
    color: var(--color-white) !important;
}
.post-preview .post-title,
.post-preview .post-subtitle {
    color: var(--color-black-gray) !important;
}

/* 1. 强制导航链接在所有网页端状态下为白色 */

/* 默认（大图上）状态下的链接和品牌标题 */
.navbar-default.navbar-custom .nav > li > a,
.navbar-default.navbar-custom .navbar-brand,
.navbar-custom .nav > li > a,
.navbar-custom .navbar-brand {
    color: var(--color-white) !important;
}

/* 滚动后固定状态（fixed）下的链接和品牌标题 */
/* 注意：如果滚动后导航背景变浅，这里的颜色也应该是白色，导致看不见。
   如果发生这种情况，请将这里的 color: var(--color-white) 改为 color: #333333 */
.navbar-custom.is-fixed .nav > li > a,
.navbar-default.is-fixed .navbar-brand {
    color: var(--color-white) !important; 
}


/* 2. 手机端下拉导航栏链接 (展开后的导航内容) - 保持黑灰色 */

/* 确保手机端下拉菜单中的链接颜色不被上面的白色规则覆盖 */
.navbar-collapse .nav li a,
.navbar-default .navbar-collapse.in .nav li a {
    color: var(--color-nav-mobile) !important; /* 使用定义的黑灰色 */
}

/* 3. 手机端 Brand/Title (当菜单展开时) */
/* 手机端下拉菜单展开时，顶部的 Brand 标题应该与下拉链接颜色一致 */
@media (max-width: 767px) {
    .navbar-default .navbar-brand {
        color: var(--color-nav-mobile) !important;
    }
}

/* 修复：分割线颜色优化（保持不变）*/
hr.small,
hr.post-heading-small,
.post-preview hr {
    border-color: #dddddd; 
}


/* ====================
 * 3. 文章页 (Post Page) 正文排版
 * ==================== */

.container.post-container .post-content,
.container.post-container .post-content p {
    text-align: justify; 
    font-size: var(--body-font-size); 
    line-height: var(--body-line-height); /* 优化行间距 */
    margin-bottom: var(--body-paragraph-margin-bottom); /* 优化段间距 */
}

.post-content p, 
.container.post-container .post-content p {
    text-indent: var(--body-text-indent) !important; 
}

/* 确保列表、引用等不缩进的规则仍然存在 */
.post-content ul p,
.post-content ol p,
.post-content blockquote p,
.post-content pre p {
    text-indent: 0 !important; 
}


/* ====================
 * 4. 响应式布局 (Responsive/Mobile Layout)
 * ==================== */

@media (max-width: 768px) {
    /* 强制在移动端使用目标字体和字重 */
    body, p, li, blockquote,
    .container-fluid,
    .container.post-container {
        font-family: var(--chinese-font), var(--english-font) !important; 
        font-weight: var(--body-font-weight-normal) !important;
    }

    /* **修复：优化手机端两端缩进（贴边问题）** */
    /* 针对主容器应用更大的内边距 */
    .container,
    .col-lg-8, 
    .col-md-10 {
        padding-left: var(--mobile-padding) !important;
        padding-right: var(--mobile-padding) !important;
    }

    /* 移动端字号和行间距调整 */
    .container.post-container .post-content,
    .container.post-container .post-content p {
        font-size: var(--mobile-font-size) !important; 
        line-height: var(--mobile-line-height) !important; 
    }
}

/* ==================================================
 * Waline 极简模式：最终 CSS 修正 (只保留昵称和评论框)
 * ================================================== */

/* 隐藏邮箱、网址输入框 */
.wl-meta-list .wl-meta-input:nth-child(2),
.wl-meta-list .wl-meta-input:nth-child(3) {
  display: none !important;
}

/* 字体统一 */
:root {
  --waline-font-size: 16px !important;
}

#waline .wl-content,
#waline .wl-nick {
  font-size: var(--waline-font-size) !important;
  font-family: "Noto Serif SC", var(--english-font), serif !important;
  color: #333 !important;
}

/* 隐藏多余 UI 元素 */
#waline .wl-comment-box .wl-editor-controls,
#waline .wl-header-actions,
#waline .wl-meta-list,
#waline .wl-power-by,
#waline .wl-reaction-title {
  display: none !important;
}

/* ==============================
   爱心按钮：灰 -> 红
   ============================== */
#waline .wl-custom-like {
  display: inline-flex !important;
  align-items: center !important;
  cursor: pointer !important;
  margin-left: 10px;
  padding: 2px 6px;
  font-size: 1.1em;
  border-radius: 6px;
  color: #aaa; /* 未点时灰色 */
  opacity: 0.8;
  transition: all 0.25s ease;
  user-select: none;
  background: transparent;
}

#waline .wl-custom-like:hover {
  opacity: 1;
  transform: scale(1.05);
}

/* 点赞后变红并放大 */
#waline .wl-custom-like.active {
  color: #e74c3c !important; /* 红色爱心 */
  opacity: 1;
  transform: scale(1.2);
}

/* 爱心计数 */
#waline .wl-custom-like .wl-like-count {
  margin-left: 5px;
  font-size: 0.9em;
}

/* ==============================
   评论框整体风格：白绿简约
   ============================== */
#waline {
  border: none !important;
  box-shadow: none !important;
  background: #fff !important;
}

#waline .wl-editor {
  border-radius: 10px !important;
  border: 1px solid #E0E0E0 !important;
  background-color: #FAFAFA !important;
}

#waline .wl-btn {
  border-radius: 8px !important;
  background-color: #4CAF50 !important;
  color: white !important;
  border: none !important;
  transition: background-color 0.3s ease;
}

#waline .wl-btn:hover {
  background-color: #43A047 !important;
}

/* ==============================
   Hexo Post 正文优化
   ============================== */
.container.post-container .post-content {
    text-align: justify !important;        /* 两端对齐 */
    font-size: 16px !important;            /* 可根据需要调整 */
    line-height: 1.9 !important;           /* 稍微加大行高 */
    font-family: 'Noto Serif SC', serif !important;
    color: #333333 !important;             /* 普通字体颜色 */
}

.container.post-container .post-content strong,
.container.post-container .post-content b {
    font-weight: 700 !important;           /* 加粗字体 */
    color: #111111 !important;             /* 加强与正文的对比 */
}

/* 列表和引用保持排版，首行不缩进 */
.post-content ul p,
.post-content ol p,
.post-content blockquote p,
.post-content pre p {
    text-indent: 0 !important;
}

/* ==============================
   解决 Bootstrap 栅格导致首行缩进失效
   ============================== */
.col-lg-8.col-lg-offset-2,
.col-md-10.col-md-offset-1 {
    display: block !important;  /* 恢复块级布局 */
}

.post-content p {
    display: block !important;   /* 块级段落 */
    text-indent: 2ch !important; /* 首行缩进 */
    margin-top: 0 !important;
    margin-bottom: 1.5em !important;
    line-height: 1.9 !important;
    font-family: 'Noto Serif SC', serif !important;
}
