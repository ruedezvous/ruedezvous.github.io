/*
 * custom.css
 * 用于 Hexo clean-blog 主题的自定义排版 - 终极修复与优化
 */

/* ====================
 * 1. 全局字体定义 (Font Definitions & Colors)
 * ==================== */

/* 字体导入（假设路径正确）*/
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 300; 
    font-style: normal;
}
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 400; 
    font-style: normal;
}

/* 定义CSS变量 */
:root {
    --chinese-font: 'Noto Serif SC', serif;
    --english-font: serif; 

    /* 颜色设置 */
    --color-white: #ffffff;
    --color-nav-mobile: #555555; /* 手机导航栏下拉字体颜色 */
    --color-black-gray: #333333; 
    --color-text-normal: #404040; 
    --color-text-strong: #202020; 

    /* 正文排版优化：行间距与段间距 */
    --body-font-size: 14.5px; 
    --body-font-weight-normal: 300; 
    --body-line-height: 1.8; /* **优化：行间距略减，更美观** */
    --body-paragraph-margin-bottom: 1.2em; /* **优化：段间距略减，更紧凑** */
    --body-text-indent: 2em; /* 首行缩进 */

    /* 手机端优化 */
    --mobile-font-size: 14px; 
    --mobile-line-height: 1.7; 
    --mobile-padding: 18px; /* **优化：手机端两侧的间距** */
}

/* 应用全局样式和字重 */
body {
    font-family: var(--chinese-font), var(--english-font);
    color: var(--color-text-normal);
    font-weight: var(--body-font-weight-normal);
}

/* 加强目标字体应用 */
p, li, blockquote,
.container-fluid,
.container.post-container {
    font-family: var(--chinese-font), var(--english-font) !important;
    font-weight: var(--body-font-weight-normal) !important;
    color: var(--color-text-normal) !important;
}

strong, b {
    font-weight: 700; 
    color: var(--color-text-strong); 
}

/* 列表圆点修复（保持不变）*/
ul, ol {
    list-style-type: none; 
}
.post-content ul {
    list-style-type: disc; 
}
.post-content ol {
    list-style-type: decimal;
}


/* ====================
 * 2. 导航栏和标题样式
 * ==================== */

/* 标题字体重置（保持不变）*/
.navbar a,
header.masthead h1,
header.masthead .subheading,
.post-preview .post-title,
.post-preview .post-subtitle {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
}

/* 颜色设置（保持不变）*/
header.masthead h1,
header.masthead .subheading {
    color: var(--color-white) !important;
}
.post-preview .post-title,
.post-preview .post-subtitle {
    color: var(--color-black-gray) !important;
}

/* **修复：导航栏字体颜色区分** */
/* --------------------------------------
 * 修复：导航栏字体颜色区分
 * -------------------------------------- */
/* 1. 强制导航链接在所有网页端状态下为白色 */

/* 默认（大图上）状态下的链接和品牌标题 */
.navbar-default.navbar-custom .nav > li > a,
.navbar-default.navbar-custom .navbar-brand,
.navbar-custom .nav > li > a,
.navbar-custom .navbar-brand {
    color: var(--color-white) !important;
}

/* 滚动后固定状态（fixed）下的链接和品牌标题 */
/* 注意：如果滚动后导航背景变浅，这里的颜色也应该是白色，导致看不见。
   如果发生这种情况，请将这里的 color: var(--color-white) 改为 color: #333333 */
.navbar-custom.is-fixed .nav > li > a,
.navbar-default.is-fixed .navbar-brand {
    color: var(--color-white) !important; 
}


/* 2. 手机端下拉导航栏链接 (展开后的导航内容) - 保持黑灰色 */

/* 确保手机端下拉菜单中的链接颜色不被上面的白色规则覆盖 */
.navbar-collapse .nav li a,
.navbar-default .navbar-collapse.in .nav li a {
    color: var(--color-nav-mobile) !important; /* 使用定义的黑灰色 */
}

/* 3. 手机端 Brand/Title (当菜单展开时) */
/* 手机端下拉菜单展开时，顶部的 Brand 标题应该与下拉链接颜色一致 */
@media (max-width: 767px) {
    .navbar-default .navbar-brand {
        color: var(--color-nav-mobile) !important;
    }
}

/* 修复：分割线颜色优化（保持不变）*/
hr.small,
hr.post-heading-small,
.post-preview hr {
    border-color: #dddddd; 
}


/* ====================
 * 3. 文章页 (Post Page) 正文排版
 * ==================== */

.container.post-container .post-content,
.container.post-container .post-content p {
    text-align: justify; 
    font-size: var(--body-font-size); 
    line-height: var(--body-line-height); /* 优化行间距 */
    margin-bottom: var(--body-paragraph-margin-bottom); /* 优化段间距 */
}

/* **修复：终极首行缩进** */
/* 使用更强大的选择器，并对所有相关元素强制应用 */
.post-content p, 
.container.post-container .post-content p {
    text-indent: var(--body-text-indent) !important; 
}

/* 确保列表、引用等不缩进的规则仍然存在 */
.post-content ul p,
.post-content ol p,
.post-content blockquote p,
.post-content pre p {
    text-indent: 0 !important; 
}


/* ====================
 * 4. 响应式布局 (Responsive/Mobile Layout)
 * ==================== */

@media (max-width: 768px) {
    /* 强制在移动端使用目标字体和字重 */
    body, p, li, blockquote,
    .container-fluid,
    .container.post-container {
        font-family: var(--chinese-font), var(--english-font) !important; 
        font-weight: var(--body-font-weight-normal) !important;
    }

    /* **修复：优化手机端两端缩进（贴边问题）** */
    /* 针对主容器应用更大的内边距 */
    .container,
    .col-lg-8, 
    .col-md-10 {
        padding-left: var(--mobile-padding) !important;
        padding-right: var(--mobile-padding) !important;
    }

    /* 移动端字号和行间距调整 */
    .container.post-container .post-content,
    .container.post-container .post-content p {
        font-size: var(--mobile-font-size) !important; 
        line-height: var(--mobile-line-height) !important; 
    }
}

/* ==================================================
 * 1. Waline 评论区整体简洁化与调性调整
 * ================================================== */

/* 强制 Waline 评论区使用博客的自定义字体 */
.wl-container,
.wl-container button,
.wl-container input,
.wl-container textarea,
.wl-container .wl-emoji-popup {
    font-family: var(--chinese-font), var(--english-font), sans-serif !important;
    font-size: 16px; /* 调整评论区的字号，保持与正文一致 */
    line-height: var(--line-height-base); /* 继承博客基础行高 */
    color: var(--color-text-normal); /* 继承正文颜色 */
}

/* 统一评论区背景色 */
.wl-container {
    background-color: var(--color-background-primary); /* 与博客主体背景色一致 */
    border-radius: var(--border-radius-base); /* 圆角处理 */
    padding: 20px 0; /* 内部留白 */
    margin-top: 30px; /* 顶部与文章内容间隔 */
}

/* 隐藏 Waline 默认的底部分割线 */
.wl-header-wrapper {
    border-bottom: none !important;
    padding-bottom: 0 !important;
    margin-bottom: 10px !important;
}

/* 隐藏底部的 Powered By Waline 标识 */
.wl-power-by {
    display: none;
}

/* 隐藏 Waline 的访问统计 */
.wl-meta-list {
    display: none !important;
}

/* 隐藏 Waline 的通知功能 (只保留评论功能) */
.wl-header-actions {
    display: none !important;
}

/* ==================================================
 * 2. 评论输入框和按钮美化
 * ================================================== */

/* 评论输入框的边框和背景 */
.wl-editor {
    border: 1px solid var(--color-border-light); /* 柔和边框 */
    border-radius: var(--border-radius-base); /* 继承基础圆角 */
    padding: 10px;
    background-color: var(--color-background-input); /* 浅色输入框背景 */
    box-shadow: none; /* 移除阴影 */
}

/* 评论按钮样式 (以博客的强调色为主) */
.wl-btn-send {
    background-color: var(--color-brand-primary); /* 博客的主题色 */
    color: var(--color-white); /* 按钮文字白色 */
    border: none;
    border-radius: var(--border-radius-base);
    padding: 8px 15px;
    transition: background-color 0.3s ease;
    font-weight: var(--font-weight-bold); /* 按钮文字加粗 */
    cursor: pointer;
}

/* 鼠标悬停时的按钮颜色 */
.wl-btn-send:hover {
    background-color: var(--color-brand-secondary); /* 稍深的按钮颜色 */
}

/* 表情和图片上传按钮的样式 */
.wl-header .wl-icon-btn {
    color: var(--color-text-light); /* 柔和的图标颜色 */
    transition: color 0.3s ease;
}
.wl-header .wl-icon-btn:hover {
    color: var(--color-brand-primary); /* 鼠标悬停时显示主题色 */
}

/* ==================================================
 * 3. 简化点赞图标 (核心)
 * ================================================== */

/* 隐藏 Waline 默认的点赞图标（各种表情）*/
.wl-comment-action-reaction-btn {
    display: none;
}

/* 新增一个点赞图标的容器 */
.wl-comment-action .wl-action-item[data-type="like"] {
    display: flex; /* 确保Flexbox布局 */
    align-items: center; /* 垂直居中 */
    cursor: pointer;
    color: var(--color-text-light); /* 默认图标颜色 */
    transition: color 0.3s ease;
}

/* 未点赞状态的爱心图标 */
.wl-comment-action .wl-action-item[data-type="like"]::before {
    content: '❤️'; /* 使用简洁的爱心表情符号 */
    font-size: 1.2em; /* 调整图标大小 */
    margin-right: 5px;
}

/* 已点赞状态的爱心图标 */
.wl-comment-action .wl-action-item[data-type="like"].active::before {
    content: '❤️'; /* 保持爱心符号 */
    color: #ff6b6b; /* 点赞后变成红色 */
}

/* 点赞数字的样式 */
.wl-comment-action .wl-action-item[data-type="like"] .wl-count {
    color: var(--color-text-light); /* 默认计数颜色 */
    font-size: 0.9em;
}
.wl-comment-action .wl-action-item[data-type="like"].active .wl-count {
    color: #ff6b6b; /* 点赞后计数颜色也变红 */
}


/* ==================================================
 * 4. 评论列表样式
 * ================================================== */

/* 评论卡片背景和边框 */
.wl-card {
    background-color: var(--color-background-primary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-base);
    margin-bottom: 15px;
    padding: 15px;
    box-shadow: none;
}

/* 评论用户名和日期 */
.wl-card .wl-nick {
    color: var(--color-brand-primary); /* 用户名使用主题色 */
    font-weight: var(--font-weight-bold);
}
.wl-card .wl-time {
    color: var(--color-text-light);
    font-size: 0.85em;
}

/* 评论回复按钮 */
.wl-card .wl-reply {
    color: var(--color-brand-primary);
    font-size: 0.9em;
    font-weight: var(--font-weight-medium);
}
.wl-card .wl-reply:hover {
    text-decoration: underline;
}

/* 评论内容 */
.wl-card .wl-content {
    color: var(--color-text-normal);
    line-height: var(--line-height-base);
    word-wrap: break-word; /* 防止长单词溢出 */
}
