/*
 * custom.css
 * 用于 Hexo clean-blog 主题的自定义排版 - 终极修复与优化
 */

/* ====================
 * 1. 全局字体定义 (Font Definitions & Colors)
 * ==================== */

/* 字体导入（假设路径正确）*/
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 300; 
    font-style: normal;
}
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 400; 
    font-style: normal;
}

/* 定义CSS变量 */
:root {
    --chinese-font: 'Noto Serif SC', serif;
    --english-font: serif; 

    /* 颜色设置 */
    --color-white: #ffffff;
    --color-nav-mobile: #555555; /* 手机导航栏下拉字体颜色 */
    --color-black-gray: #333333; 
    --color-text-normal: #404040; 
    --color-text-strong: #202020; 

    /* 正文排版优化：行间距与段间距 */
    --body-font-size: 14.5px; 
    --body-font-weight-normal: 300; 
    --body-line-height: 1.8; /* **优化：行间距略减，更美观** */
    --body-paragraph-margin-bottom: 1.2em; /* **优化：段间距略减，更紧凑** */
    --body-text-indent: 2em; /* 首行缩进 */

    /* 手机端优化 */
    --mobile-font-size: 14px; 
    --mobile-line-height: 1.7; 
    --mobile-padding: 18px; /* **优化：手机端两侧的间距** */
}

/* 应用全局样式和字重 */
body {
    font-family: var(--chinese-font), var(--english-font);
    color: var(--color-text-normal);
    font-weight: var(--body-font-weight-normal);
}

/* 加强目标字体应用 */
p, li, blockquote,
.container-fluid,
.container.post-container {
    font-family: var(--chinese-font), var(--english-font) !important;
    font-weight: var(--body-font-weight-normal) !important;
    color: var(--color-text-normal) !important;
}

strong, b {
    font-weight: 700; 
    color: var(--color-text-strong); 
}

/* 列表圆点修复（保持不变）*/
ul, ol {
    list-style-type: none; 
}
.post-content ul {
    list-style-type: disc; 
}
.post-content ol {
    list-style-type: decimal;
}


/* ====================
 * 2. 导航栏和标题样式
 * ==================== */

/* 标题字体重置（保持不变）*/
.navbar a,
header.masthead h1,
header.masthead .subheading,
.post-preview .post-title,
.post-preview .post-subtitle {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
}

/* 颜色设置（保持不变）*/
header.masthead h1,
header.masthead .subheading {
    color: var(--color-white) !important;
}
.post-preview .post-title,
.post-preview .post-subtitle {
    color: var(--color-black-gray) !important;
}

/* **修复：导航栏字体颜色区分** */
/* --------------------------------------
 * 修复：导航栏字体颜色区分
 * -------------------------------------- */

/* 1. 网页端导航栏链接 - 强制白色 */

/* 确保在页面顶部（非固定透明状态）时，链接颜色为白色 */
.navbar-custom .nav > li > a, 
.navbar-default .nav > li > a,
.navbar-custom.is-fixed .nav > li > a,
.navbar-default .navbar-brand,
.navbar-custom .navbar-brand {
    /* 强制设置为白色 */
    color: var(--color-white) !important; 
}

/* 2. 网页端导航栏颜色 (滚动后 fixed 状态) */
/* 当导航栏滚动并变为固定状态（通常背景为白色/灰色）时，导航字体也应该是白色。
   注意：如果你的主题在滚动后导航背景变为白色/浅色，且你仍想保持导航字体为白色，
   用户将无法看到导航。通常滚动后字体应该变为黑灰色。
   **如果滚动后导航背景变浅，请将这里的 color: var(--color-white) 改为 color: #333333**
*/
.navbar-custom.is-fixed .nav > li > a {
    color: var(--color-white) !important; /* 保持你要求的白色 */
}


/* 3. 手机端下拉导航栏链接 (展开后的导航内容) - 保持黑灰色 */
/* 这里的优先级更高，确保在移动端展开后，字体变为黑灰色 */
.navbar-collapse .nav li a,
.navbar-default .navbar-collapse.in .nav li a {
    color: var(--color-nav-mobile) !important;
}

/* 修复：分割线颜色优化（保持不变）*/
hr.small,
hr.post-heading-small,
.post-preview hr {
    border-color: #dddddd; 
}


/* ====================
 * 3. 文章页 (Post Page) 正文排版
 * ==================== */

.container.post-container .post-content,
.container.post-container .post-content p {
    text-align: justify; 
    font-size: var(--body-font-size); 
    line-height: var(--body-line-height); /* 优化行间距 */
    margin-bottom: var(--body-paragraph-margin-bottom); /* 优化段间距 */
}

/* **修复：终极首行缩进** */
/* 使用更强大的选择器，并对所有相关元素强制应用 */
.post-content p, 
.container.post-container .post-content p {
    text-indent: var(--body-text-indent) !important; 
}

/* 确保列表、引用等不缩进的规则仍然存在 */
.post-content ul p,
.post-content ol p,
.post-content blockquote p,
.post-content pre p {
    text-indent: 0 !important; 
}


/* ====================
 * 4. 响应式布局 (Responsive/Mobile Layout)
 * ==================== */

@media (max-width: 768px) {
    /* 强制在移动端使用目标字体和字重 */
    body, p, li, blockquote,
    .container-fluid,
    .container.post-container {
        font-family: var(--chinese-font), var(--english-font) !important; 
        font-weight: var(--body-font-weight-normal) !important;
    }

    /* **修复：优化手机端两端缩进（贴边问题）** */
    /* 针对主容器应用更大的内边距 */
    .container,
    .col-lg-8, 
    .col-md-10 {
        padding-left: var(--mobile-padding) !important;
        padding-right: var(--mobile-padding) !important;
    }

    /* 移动端字号和行间距调整 */
    .container.post-container .post-content,
    .container.post-container .post-content p {
        font-size: var(--mobile-font-size) !important; 
        line-height: var(--mobile-line-height) !important; 
    }
}
