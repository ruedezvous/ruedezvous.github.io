/*
 * custom.css
 * 用于 Hexo clean-blog 主题的自定义排版 - 终极修复与优化
 */

/* ====================
 * 1. 全局字体定义 (Font Definitions & Colors)
 * ==================== */

/* 字体导入（假设路径正确）*/
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 300; 
    font-style: normal;
}
@font-face {
    font-family: 'Noto Serif SC';
    src: url('../fonts/NotoSerifSC-Regular.ttf') format('truetype');
    font-weight: 400; 
    font-style: normal;
}

/* 定义CSS变量 */
:root {
    --chinese-font: 'Noto Serif SC', serif;
    --english-font: serif; 

    /* 颜色设置 */
    --color-white: #ffffff;
    --color-nav-mobile: #555555; /* 手机导航栏下拉字体颜色 */
    --color-black-gray: #333333; 
    --color-text-normal: #404040; 
    --color-text-strong: #202020; 

    /* 正文排版优化：行间距与段间距 */
    --body-font-size: 14.5px; 
    --body-font-weight-normal: 300; 
    --body-line-height: 1.8; /* **优化：行间距略减，更美观** */
    --body-paragraph-margin-bottom: 1.2em; /* **优化：段间距略减，更紧凑** */
    --body-text-indent: 2em; /* 首行缩进 */

    /* 手机端优化 */
    --mobile-font-size: 14px; 
    --mobile-line-height: 1.7; 
    --mobile-padding: 18px; /* **优化：手机端两侧的间距** */
}

/* 应用全局样式和字重 */
body {
    font-family: var(--chinese-font), var(--english-font);
    color: var(--color-text-normal);
    font-weight: var(--body-font-weight-normal);
}

/* 加强目标字体应用 */
p, li, blockquote,
.container-fluid,
.container.post-container {
    font-family: var(--chinese-font), var(--english-font) !important;
    font-weight: var(--body-font-weight-normal) !important;
    color: var(--color-text-normal) !important;
}

strong, b {
    font-weight: 700; 
    color: var(--color-text-strong); 
}

/* 列表圆点修复（保持不变）*/
ul, ol {
    list-style-type: none; 
}
.post-content ul {
    list-style-type: disc; 
}
.post-content ol {
    list-style-type: decimal;
}


/* ====================
 * 2. 导航栏和标题样式
 * ==================== */

/* 标题字体重置（保持不变）*/
.navbar a,
header.masthead h1,
header.masthead .subheading,
.post-preview .post-title,
.post-preview .post-subtitle {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
}

/* 颜色设置（保持不变）*/
header.masthead h1,
header.masthead .subheading {
    color: var(--color-white) !important;
}
.post-preview .post-title,
.post-preview .post-subtitle {
    color: var(--color-black-gray) !important;
}

/* **修复：导航栏字体颜色区分** */
/* --------------------------------------
 * 修复：导航栏字体颜色区分
 * -------------------------------------- */
/* 1. 强制导航链接在所有网页端状态下为白色 */

/* 默认（大图上）状态下的链接和品牌标题 */
.navbar-default.navbar-custom .nav > li > a,
.navbar-default.navbar-custom .navbar-brand,
.navbar-custom .nav > li > a,
.navbar-custom .navbar-brand {
    color: var(--color-white) !important;
}

/* 滚动后固定状态（fixed）下的链接和品牌标题 */
/* 注意：如果滚动后导航背景变浅，这里的颜色也应该是白色，导致看不见。
   如果发生这种情况，请将这里的 color: var(--color-white) 改为 color: #333333 */
.navbar-custom.is-fixed .nav > li > a,
.navbar-default.is-fixed .navbar-brand {
    color: var(--color-white) !important; 
}


/* 2. 手机端下拉导航栏链接 (展开后的导航内容) - 保持黑灰色 */

/* 确保手机端下拉菜单中的链接颜色不被上面的白色规则覆盖 */
.navbar-collapse .nav li a,
.navbar-default .navbar-collapse.in .nav li a {
    color: var(--color-nav-mobile) !important; /* 使用定义的黑灰色 */
}

/* 3. 手机端 Brand/Title (当菜单展开时) */
/* 手机端下拉菜单展开时，顶部的 Brand 标题应该与下拉链接颜色一致 */
@media (max-width: 767px) {
    .navbar-default .navbar-brand {
        color: var(--color-nav-mobile) !important;
    }
}

/* 修复：分割线颜色优化（保持不变）*/
hr.small,
hr.post-heading-small,
.post-preview hr {
    border-color: #dddddd; 
}


/* ====================
 * 3. 文章页 (Post Page) 正文排版
 * ==================== */

.container.post-container .post-content,
.container.post-container .post-content p {
    text-align: justify; 
    font-size: var(--body-font-size); 
    line-height: var(--body-line-height); /* 优化行间距 */
    margin-bottom: var(--body-paragraph-margin-bottom); /* 优化段间距 */
}

/* **修复：终极首行缩进** */
/* 使用更强大的选择器，并对所有相关元素强制应用 */
.post-content p, 
.container.post-container .post-content p {
    text-indent: var(--body-text-indent) !important; 
}

/* 确保列表、引用等不缩进的规则仍然存在 */
.post-content ul p,
.post-content ol p,
.post-content blockquote p,
.post-content pre p {
    text-indent: 0 !important; 
}


/* ====================
 * 4. 响应式布局 (Responsive/Mobile Layout)
 * ==================== */

@media (max-width: 768px) {
    /* 强制在移动端使用目标字体和字重 */
    body, p, li, blockquote,
    .container-fluid,
    .container.post-container {
        font-family: var(--chinese-font), var(--english-font) !important; 
        font-weight: var(--body-font-weight-normal) !important;
    }

    /* **修复：优化手机端两端缩进（贴边问题）** */
    /* 针对主容器应用更大的内边距 */
    .container,
    .col-lg-8, 
    .col-md-10 {
        padding-left: var(--mobile-padding) !important;
        padding-right: var(--mobile-padding) !important;
    }

    /* 移动端字号和行间距调整 */
    .container.post-container .post-content,
    .container.post-container .post-content p {
        font-size: var(--mobile-font-size) !important; 
        line-height: var(--mobile-line-height) !important; 
    }
}

/* ==================================================
 * Waline 极简模式：最终 CSS 修正 (只保留昵称和评论框)
 * ================================================== */

/* 强制隐藏邮箱和网址输入框 (最强选择器) */
.wl-meta-list .wl-meta-input:nth-child(2), /* 邮箱 */
.wl-meta-list .wl-meta-input:nth-child(3)  /* 网址 */
{
    display: none !important;
}

/* 隐藏输入框下方的所有图标 (表情、GIF、图片、搜索图标) */
/* 锁定 Waline 编辑器底部的容器 */
.wl-footer-actions,
.wl-editor-action, 
.wl-editor-footer { 
    display: none !important;
}

/* 隐藏 Waline 的通知功能、统计信息、表情标题和表情容器 */
.wl-header-actions,
.wl-meta-list,
.wl-power-by,
.wl-reaction-title,
.wl-reaction-list, /* 新增：隐藏评论表情行，让操作栏的点赞按钮生效 */
.wl-comment-action-reaction-btn 
{
    display: none !important;
}

/* 强制应用简洁爱心图标 (点赞功能) */

/* 1. 隐藏 Waline 默认的图标和表情 (确保只有计数和你的自定义爱心出现) */
.wl-action-item[data-type="like"] .wl-action-icon, /* 默认图标 */
.wl-action-item[data-type="like"] .wl-action-text, /* 默认 '点赞' 文本 */
.wl-action-item[data-type="like"] .wl-reaction-item /* 默认表情图片 */
{
    display: none !important;
}

/* 2. 样式化点赞按钮容器 - 这一步是关键，你之前缺少这一步 */
.wl-comment-action .wl-action-item[data-type="like"] {
    /* 强制点赞按钮显示，因为 Waline 默认可能会隐藏它 */
    display: flex !important;
    align-items: center !important;
    cursor: pointer !important;
    transition: color 0.3s ease !important;
    color: var(--waline-text-color) !important;
    /* 调整样式 */
    padding: 0 10px !important;
    font-size: 0.9em !important;
}


/* 3. 未点赞状态的爱心图标 */
.wl-comment-action .wl-action-item[data-type="like"]::before {
    content: '❤️' !important; /* 强制显示爱心符号 */
    font-size: 1.2em !important;
    margin-right: 5px !important;
    opacity: 0.5; /* 未点赞时爱心略微变灰 */
    transition: opacity 0.3s ease;
}

/* 4. 已点赞状态的爱心图标 */
.wl-comment-action .wl-action-item[data-type="like"].active::before {
    content: '❤️' !important;
    color: #ff6b6b !important; /* 点赞后变成红色 */
    opacity: 1 !important; /* 确保覆盖 */
}

/* 5. 样式化计数器 */
.wl-comment-action .wl-action-item[data-type="like"] .wl-reaction-count {
    margin-left: 0 !important; /* 紧贴爱心 */
    line-height: 1.2em; /* 确保和爱心对齐 */
}